---
- name: Source nvm
  shell: mkdir -p ~/.nvm && export NVM_DIR="$HOME/.nvm" && source $(brew --prefix nvm)/nvm.sh && nvm install 12.11.0
  changed_when: false
  args:
    warn: false
- name: Install global NPM packages
  npm:
    name: "{{ item.name | default(item) }}"
    state: "{{ item.state | default('present') }}"
    version: "{{ item.version | default(omit) }}"
    global: yes
    executable: "~/.nvm/versions/node/v12.11.0/bin/npm"
  with_items: "{{ npm_packages }}"

- name: Install global Pip packages
  pip:
    name: "{{ item.name | default(item) }}"
    state: "{{ item.state | default('present') }}"
    version: "{{ item.version | default(omit) }}"
    executable: "{{ item.executable | default(omit) }}"
  with_items: "{{ pip_packages }}"
